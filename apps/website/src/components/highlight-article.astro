---
import type { highlightArticle } from '../content/loaders/payload/pages/schema'
import Section from "./section.astro"

import { z } from 'astro:content'
import { createImageUrl } from '../lib/createImageUrl'

type Props = z.infer<typeof highlightArticle>

const props = Astro.props
---

<Section background='white-1'>
	<div class="highlight-article-block">
		<h2 class="typestyle-h3">{props.title}</h2>
		<a class="article-content" href={props.link.url} target={props.link.newTab ? "_blank" : "_self"}>
			<img
				src={createImageUrl(props.thumbnail.url)}
				alt={props.thumbnail.alt}
				class="article-thumbnail"
			/>
			<div>
				<h3 class="article-title">
					{props.articleTitle}
				</h3>
				<p class="article-excerpt">
					{props.articleExcerpt}
				</p>
			</div>
		</a>
	</div>
</Section>

<style>
	div.highlight-article-block {
		margin: 2rem 0;
		color: black;
		display: flex;
		gap: var(--spacing-md);
		flex-direction: column;

		h2 {
			color: var(--color-green-lighter)
		}

		a.article-content {
			text-decoration: none;
			color: black;
			gap: var(--spacing-md);
			display: flex;
			flex-direction: column;

			@media (min-width: 768px) {
				flex-direction: row;
			}

			div {
				display: flex;
				flex-direction: column;
				gap: var(--spacing-sm);

				@media (min-width: 768px) {
					width: 50%;
				}

				h3 {
					font-size: 1.5rem;
					font-weight: bold;
					font-family: var(--font-sans);
					line-height: 1.3;
				}

				p {
					font-size: 1rem;
					font-weight: 600;
					font-family: var(--font-sans);
					white-space: preserve-breaks;
					line-height: 1.3;
				}
			}

			img {
				width: 100%;
				@media (min-width: 768px) {
					width: 50%;
				}
				object-fit: cover;
				max-width: 100%;
				height: auto;

				border-radius: 4px;
				border: 2px dashed var(--color-green-dark);
				aspect-ratio: 16 / 9;
			}
		}
	}
</style>
