---
import Logo from "../../assets/Logo.svg"
import { getEntry } from "astro:content"
import { Icon } from "astro-icon/components"
import { cn } from "@website/src/lib/cn"

const isDoc = Astro.locals.starlightRoute.entry.collection === "docs"

const footerEntry = await getEntry("footer", "footer")
const footer = footerEntry?.data
---

<footer
	class={cn(
		"inset-x-0 bottom-0 z-10 grid grid-cols-1 gap-y-6 px-4 gap-x-3 py-6 lg:grid-cols-5 @",
		isDoc ? "text-black" : "text-white",
	)}
>
	<a href="/"
		><Logo
			class={cn("max-w-[80%]", isDoc ? "text-black" : "text-white")}
			height={80}
			width={190}
		/></a
	>
	<div class="flex flex-col gap-2">
		{
			footer?.columnOne?.map((link) => (
				<a
					class={cn(
						"typestyle-text-s bold no-underline",
						isDoc ? "text-black" : "text-white",
					)}
					href={link.href}
					target={link.newTab ? "_blank" : ""}
					rel={link.newTab ? "noopener noreferrer" : ""}>
					{link.label}
				</a>
			))
		}
	</div>
	<div class="flex flex-col gap-2">
		{
			footer?.columnTwo?.map((link) => (
				<a
					class={cn(
						"typestyle-text-s bold no-underline",
						isDoc ? "text-black" : "text-white",
					)}
					href={link.href}
					target={link.newTab ? "_blank" : ""}
					rel={link.newTab ? "noopener noreferrer" : ""}>
					{link.label}
				</a>
			))
		}
	</div>
	<div class="flex flex-col gap-2">
		{
			footer?.columnThree?.map((link) => (
				<a
					class={cn(
						"typestyle-text-s bold no-underline",
						isDoc ? "text-black" : "text-white",
					)}
					href={link.href}
					target={link.newTab ? "_blank" : ""}
					rel={link.newTab ? "noopener noreferrer" : ""}>
					{link.label}
				</a>
			))
		}
	</div>
	<div class="row-[2] flex lg:row-auto lg:justify-end">
		{
			footer?.socialLinks?.map((social) => (
				<a
					class={cn(
						"text-4xl no-underline",
						isDoc ? "text-black" : "text-white",
					)}
					href={social.link.href}
					target={social.link.newTab ? "_blank" : ""}
					rel={social.link.newTab ? "noopener noreferrer" : ""}
					aria-label={social.link.label}>
					<Icon name={`ph:${social.icon}`} />
				</a>
			))
		}
	</div>
</footer>
